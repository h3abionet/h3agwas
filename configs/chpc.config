singularity.autoMounts = true
singularity.enabled = true
beforeScript = 'module load chpc/singularity/3.5.3'
params.containersDir = "/mnt/lustre3p/groups/CBBI1243/SharedResources/containers/"

executor {
    name = 'pbspro'
    queue = 'serial'
    queueSize = 10
}

process {
    cpus = 16
    time = 1.h
    memory = 40.GB
    clusterOptions = '-P CBBI1243 -l select=1 -m b'
    withLabel:smallMemory {
        cpus = 2
        time = 5.m
        memory = 5.GB
    }
    withLabel:bigMemory {
        time = 30.m
        memory = 100.GB
    }
    withLabel:tidyverse {
        container = "${params.containersDir}tidyverse_latest.sif"
    }
    withLabel:qqman {
        container = "${params.containersDir}r-qqman_latest.sif"
    }
    withLabel:plink {
        container = "${params.containersDir}py3plink_latest.sif"
    }
    withLabel:datatable {
        container = "${params.containersDir}py3-pandas-datatable.sif"
    }
}
